<launch>

  <arg name="view_image" default="true" doc="Display the overhead camera feed with tracking info"/>
  <arg name="with_rviz" default="true" doc="Launched rviz if true"/>

  <include file="$(find table_vision_sensing)/launch/start_tracking.launch">
    <arg name="view_image" value="$(arg view_image)"/>
  </include>

  <node name="follow_ball" type="follow_ball" pkg="table_gameplay_ai" output="screen" required="true">
    <rosparam command="load" file="$(find table_gameplay_ai)/config/homography_config.yaml"/>
    <rosparam command="load" file="$(find table_gameplay_ai)/config/command_generation_config.yaml"/>
    <rosparam command="load" file="$(find table_motor_control)/config/motor_ids.yaml"/>
  </node>

  <include file="$(find table_description)/launch/view_table.launch">
    <arg name="use_gui" value="False"/>
    <arg name="with_rviz" value="$(arg with_rviz)"/>
  </include>

  <node if="$(arg view_image)" name="opencv_viewer_raw" type="opencv_viewer" pkg="table_vision_sensing" output="screen">
    <param name="point_radius" value="3"/> <!-- the radius of the dot of on the viewer -->
    <param name="show_ball_pos" value="false"/>
    <param name="show_player_angle" value="false"/>
  </node>

</launch>
